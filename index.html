<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprenda a Programar</title>
    <style>
        body {
            font-family: sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
            padding-bottom: 5rem; /* Added padding */
        }

        header {
            background: #333;
            color: #fff;
            padding: 1rem 0;
            text-align: center;
        }

        header h1 {
            margin: 0;
        }

        nav {
            background: #444;
            color: #fff;
            padding: 1rem;
        }

        nav h2 {
            margin-top: 0;
            text-align: center;
        }

        nav ul {
            list-style: none;
            padding: 0;
            text-align: center;
        }

        nav ul li {
            display: inline;
            margin-right: 10px;
        }

        nav ul li a {
            color: #fff;
            text-decoration: none;
        }

        nav ul li a:hover {
            text-decoration: underline;
        }

        main#lessonContent {
            padding: 1rem;
            margin: 1rem; /* Existing margin */
            background: #fff;
            border-radius: 5px;
            margin-bottom: 10rem; /* Added substantial margin-bottom */
        }

        footer {
            text-align: center;
            padding: 1rem;
            background: #333;
            color: #fff;
            margin-top: 2rem; /* Added margin */
            /* position: fixed; removed */
            /* bottom: 0; removed */
            /* width: 100%; removed */
        }

        /* styles for on-page console */
        .console-output-area {
        background-color: #222;
        color: #eee;
        font-family: 'Courier New', Courier, monospace;
            padding: 10px;
        margin: 1rem;
            border-radius: 5px;
            border: 1px solid #444;
        display: flex; /* Make this a flex container */
        flex-direction: column; /* Stack children vertically */
        height: 200px; /* Or a suitable height, can be min/max too */
        }

        .console-header {
            font-weight: bold;
            margin-bottom: 5px;
            border-bottom: 1px solid #555;
            padding-bottom: 5px;
        flex-shrink: 0; /* Prevent header from shrinking */
        }

    #consoleMessages {
        /* clear: both; no longer needed with flex parent */
        /* height: 100px; Remove fixed height */
        overflow-y: auto;
        border-bottom: 1px solid #555;
        margin-bottom: 5px;
        flex-grow: 1; /* Allow messages area to take available vertical space */
        min-height: 50px; /* Ensure it has some minimum height */
    }

    #consoleInputArea {
        display: flex; /* This is already set, good */
        align-items: center; /* Vertically align items in input area */
        flex-shrink: 0; /* Prevent input area from shrinking */
        padding-top: 5px; /* Add some space above input area */
    }

    #consoleInput {
        flex-grow: 1;
        background-color: #333;
        color: #eee;
        border: 1px solid #555;
        padding: 8px; /* Increased padding for better touch target */
        font-size: 1em; /* Ensure font size is not too small */
        min-height: 20px; /* Ensure a minimum height for the input field itself */
    }

    #runConsoleInputButton {
        margin-left: 5px;
        padding: 8px 10px; /* Increased padding */
        font-size: 1em;
        background-color: #444; /* Added for consistency */
        color: #eee; /* Added for consistency */
        border: 1px solid #555; /* Added for consistency */
        border-radius: 3px; /* Added for consistency */
    }

    #consoleMessages p { /* This rule might need to be placed after #consoleMessages if specificity is an issue, but likely fine */
            margin: 0 0 5px 0; /* Spacing between messages */
            white-space: pre-wrap; /* Preserve whitespace and wrap lines */
            word-break: break-all; /* Break long words to prevent overflow */
        }
    </style>
</head>
<body>
    <header>
        <h1>Aprenda HTML, CSS e JavaScript</h1>
    </header>
    <nav>
        <h2>Lições</h2>
        <ul>
            <li><a href="#" id="lesson1Link">JavaScript Básico - Lição 1</a></li>
            <!-- Adicionar mais links de lições aqui -->
        </ul>
    </nav>
    <main id="lessonContent">
        <p>Selecione uma lição para começar.</p>
    </main> <!-- This is the closing tag of main#lessonContent -->

    <div id="onPageConsoleOutput" class="console-output-area">
        <div class="console-header">
            <span>Console:</span>
            <button id="clearConsoleButton" style="float: right; font-size: 0.8em; padding: 2px 5px;">Clear</button>
        </div>
        <div id="consoleMessages" style="/* clear: both; height: 100px; - Replaced by flex properties in CSS */">
            <!-- Messages will appear here -->
        </div>
        <div id="consoleInputArea" style="/* display: flex; - Replaced by CSS rule */">
            <input type="text" id="consoleInput" style="/* flex-grow: 1; background-color: #333; color: #eee; border: 1px solid #555; padding: 3px; - Replaced by CSS */" placeholder="Digite o código aqui...">
            <button id="runConsoleInputButton" style="/* margin-left: 5px; padding: 3px 7px; - Replaced by CSS */">Executar</button>
        </div>
    </div>

    <div id="jsLesson1Content" style="display:none;">
        <h2>JavaScript Básico - Lição 1: Variáveis e Console</h2>
        <p>Bem-vindo à sua primeira lição de JavaScript!</p>

        <h3>O que é JavaScript?</h3>
        <p>JavaScript é uma linguagem de programação que permite adicionar interatividade às páginas web. Com ela, você pode criar elementos dinâmicos, validar formulários, animar objetos e muito mais.</p>

        <h3>Variáveis</h3>
        <p>Variáveis são como "caixas" onde você pode guardar informações. Em JavaScript, você pode declarar uma variável usando <code>let</code>, <code>const</code>, ou <code>var</code> (<code>let</code> e <code>const</code> são mais modernos e recomendados).</p>
        <p><strong>Exemplo:</strong></p>
        <pre><code>
let saudacao = "Olá, mundo!";
const pi = 3.14159;

// Você pode ver o valor de uma variável usando console.log()
console.log(saudacao); // Isso mostrará "Olá, mundo!" no console do navegador
console.log(pi);       // Isso mostrará 3.14159
        </code></pre>
        <p><code>let</code> permite que você mude o valor da variável depois, enquanto <code>const</code> cria uma constante, ou seja, um valor que não pode ser alterado após a atribuição.</p>

        <h3><code>console.log()</code> e o Console na Página</h3>
        <p>A função <code>console.log()</code> é uma ferramenta muito útil para desenvolvedores. Ela permite que você exiba mensagens ou valores de variáveis.</p>
        <p>Neste aplicativo, as saídas de <code>console.log()</code> aparecerão diretamente em uma área de "Console" localizada abaixo desta lição. Isso facilita a visualização dos resultados, especialmente em dispositivos móveis.</p>
        <p>Você ainda pode abrir o console do seu navegador (geralmente clicando com o botão direito na página, selecionando "Inspecionar" ou "Inspecionar Elemento", e então procurando pela aba "Console") para ver informações adicionais ou erros mais detalhados.</p>
        <p><strong>Exemplo:</strong></p>
        <pre><code>
console.log("Estou aprendendo JavaScript!");
let numero = 10;
console.log("O valor da variável numero é:", numero);
// Observe a saída no console abaixo da lição!
        </code></pre>

        <h3>Experimente!</h3>
        <p>Tente declarar algumas variáveis e usar <code>console.log()</code>. Veja os resultados aparecerem no console aqui na página, logo abaixo. </p>
        <p><strong>Agora você também pode digitar comandos JavaScript diretamente no campo de entrada do console abaixo e clicar em "Executar" (ou pressionar Enter) para ver o resultado!</strong> Por exemplo, tente digitar <code>let minhaVariavel = "Olá do console!";</code> e depois <code>console.log(minhaVariavel);</code>. Use o botão "Clear" no console da página para limpar as mensagens antigas.</p>
    </div>
    <footer>
        <p>&copy; 2023 Seu App de Ensino</p>
    </footer>
    <script>
        // --- On-page console implementation ---
        const consoleMessagesContainer = document.getElementById('consoleMessages');
        const originalConsoleLog = console.log;

        console.log = function(...args) {
            // Call the original console.log so messages also appear in the browser's dev console
            originalConsoleLog.apply(console, args);

            // Create a new message element for the on-page console
            const messageElement = document.createElement('p');

            // Convert all arguments to strings and join them
            const messageText = args.map(arg => {
                if (typeof arg === 'object' && arg !== null) {
                    try {
                        return JSON.stringify(arg, null, 2); // Pretty print objects
                    } catch (e) {
                        return '[Object]'; // Fallback for complex/circular objects
                    }
                }
                return String(arg);
            }).join(' '); // Join multiple arguments with a space

            messageElement.textContent = messageText;

            if (consoleMessagesContainer) {
                consoleMessagesContainer.appendChild(messageElement);
                // Scroll to the bottom of the console
                consoleMessagesContainer.scrollTop = consoleMessagesContainer.scrollHeight;
            } else {
                // Fallback if the on-page console isn't found yet (e.g., if script runs too early)
                originalConsoleLog('On-page console element not found. Message: ', messageText);
            }
        };

        // --- End of On-page console implementation ---

        // Existing script content (DOMContentLoaded listener etc.) follows:
        document.addEventListener('DOMContentLoaded', function() {
            // Make sure consoleMessagesContainer is defined here if not globally,
            // or if the above code is moved inside DOMContentLoaded.
            // For simplicity, keeping it global for now as getElementById might run before DOM is fully ready
            // if this entire script block is in <head>. But since it's at end of <body>, it should be fine.

            const lesson1Link = document.getElementById('lesson1Link');
            const lessonContentArea = document.getElementById('lessonContent');
            const jsLesson1HtmlContent = document.getElementById('jsLesson1Content').innerHTML;
            const clearConsoleBtn = document.getElementById('clearConsoleButton'); // Get the button
            const consoleMessagesDiv = document.getElementById('consoleMessages'); // Get the messages div (used by clear button)
            // consoleMessagesContainer is the global one used by the console.log override. Both point to the same element.

            const consoleInput = document.getElementById('consoleInput');
            const runConsoleInputButton = document.getElementById('runConsoleInputButton');

            function executeConsoleInput() {
                const command = consoleInput.value.trim();
                if (command === '') {
                    return;
                }

                // Echo the command to the on-page console
                const commandEchoElement = document.createElement('p');
                commandEchoElement.style.color = '#88aaff'; // Style for echoed command
                commandEchoElement.textContent = `> ${command}`;
                if (consoleMessagesContainer) { // Use the same container as the overridden console.log
                    consoleMessagesContainer.appendChild(commandEchoElement);
                }

                try {
                    const result = eval(command);
                    if (result !== undefined) {
                        console.log(result); // This will use our overridden console.log
                    }
                } catch (error) {
                    console.log(`Error: ${error.message}`);
                }

                consoleInput.value = ''; // Clear the input field

                if (consoleMessagesContainer) {
                    consoleMessagesContainer.scrollTop = consoleMessagesContainer.scrollHeight;
                }
            }

            if (runConsoleInputButton && consoleInput) {
                runConsoleInputButton.addEventListener('click', executeConsoleInput);
                consoleInput.addEventListener('keypress', function(event) {
                    if (event.key === 'Enter' || event.keyCode === 13) {
                        executeConsoleInput();
                    }
                });
            }

            lesson1Link.addEventListener('click', function(event) {
                event.preventDefault(); // Previne o comportamento padrão do link (navegar para #)
                lessonContentArea.innerHTML = jsLesson1HtmlContent;
            });

            // Add event listener for the clear console button
            if (clearConsoleBtn && consoleMessagesDiv) {
                clearConsoleBtn.addEventListener('click', function() {
                    consoleMessagesDiv.innerHTML = ''; // Clear the console messages
                });
            }
        });
    </script>
</body>
</html>
